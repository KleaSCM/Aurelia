# Aurelia - Virtual System Ecosystem Scope
> **Status**: **DELIVERED (v0.1.0)**
> **Philosophy**: Full architectural emulation. From Logic Gates to Operating System.
> **Language**: C++23 (Strict)

## 1. Global Architecture
- **Synchronization**: 64-bit global `TickCounter`. All components are strictly synchronized.
- **Endianness**: Little-Endian.
- **Word Size**: 64-bit Data / 64-bit Address.
- **Simulation Model**: Cycle-Accurate Pipeline FSM.

## 2. Bus System (The Nervous System)
A strictly synchronous, tick-based interconnect.
- **Protocol**: Request/Grant/Wait handshake.
- **Channels**:
    - **Address**: 64-bit.
    - **Data**: 64-bit.
    - **Control**: READ, WRITE, READY, WAIT, IRQ, ERROR.
- **Features**: Memory-Mapped I/O (MMIO) routing.

## 3. Central Processing Unit (Aurelia Core)
**Architecture**: RISC-like, Load/Store.
- **Register File**: 32 x 64-bit General Purpose Registers (R0-R31).
- **Special Registers**: PC (Program Counter), SP (Stack Pointer), SR (Status Register).
- **ALU**: 
    - Arithmetic: ADD, SUB.
    - Logic: AND, OR, XOR.
    - Shifts: LSL, LSR.
    - Flags: Zero (Z), Negative (N), Carry (C), Overflow (V).
- **Control Unit**:
    - 3-Stage Pipeline: **Fetch** -> **Decode** -> **Execute/Memory/Writeback**.
    - Handles Branch Logic (B, BEQ, BNE).
    - Hardwired Interrupt Handling (via PIC).

## 4. Memory Subsystem
- **RAM**: 256MB Flat Physical Array.
    - Zero-latency simulation optimized for performance.
- **Storage Subsystem (NAND Flash)**:
    - **Physics Emulation**: Pages (4KB), Blocks (64 Pgs), Planes.
    - **Controller**: NVMe-like architecture with Submission/Completion Queues.
    - **FTL (Flash Translation Layer)**: Logical-to-Physical Mapping, Garbage Collection, Wear Leveling.

## 5. Toolchain (The Assembler)
Custom-built Assembly Language (`.s` -> `.bin`).
- **Pipeline**: Lexer -> Parser -> Resolver -> Encoder.
- **Features**:
    - Mnemonic parsing (ADD, MOV, STR, etc.).
    - Label resolution (`loop_x:`).
    - Directives (`.string`).
    - Relative Branch calculation with range validation.
    - Helpful error reporting (File/Line/Column).

## 6. I/O & Peripherals
- **UART (Serial Console)**:
    - Mapped @ `0xE0001000`.
    - Bi-directional stdio redirection.
- **PIC (Interrupt Controller)**:
    - Mapped @ `0xE0002000`.
    - Manages IRQ routing, masking, and acknowledgment.
- **System Timer**:
    - Mapped @ `0xE0003000`.
    - Generates periodic interrupts for OS scheduling.

## 7. System Verification
- **Integration Tests**: Full end-to-end verification (Assembler -> Machine Code -> CPU Execution).
- **Interactive Demo**: Built-in Performance Benchmark (Mandelbrot) demonstrating:
    - Real-time Emulation Speed (~20 MHz).
    - Bus Traffic Analysis.
    - SSD Persistence Verification.